<tool id="submit_to_mogi" name="submit_to_mogi" version="0.0.1">
    <description>
        Submit Galaxy datasets to MOGI django database
    </description>


    <macros>
        <import>macros.xml</import>
    </macros>

    <expand macro="requirements">
      
    </expand>


 <stdio>
        <exit_code range="1:" />
    </stdio>
     <command>
       #set $galaxy_data_id=$__app__.security.encode_id($mogi_data.id)
       #set $galaxy_history_id=$__app__.security.encode_id($mogi_data.creating_job.history.id)
       #set $galaxy_history_name=$mogi_data.creating_job.history.name
       
       echo $galaxy_data_id;
       echo $galaxy_history_id;
       echo $galaxy_history_name;
       

       curl -d "galaxy_data_id=$galaxy_data_id&amp;galaxy_history_id=$galaxy_history_id&amp;galaxy_history_name=$galaxy_history_name" -X POST --insecure $mogi_url/incomingdata/ > curl_out.txt;
      </command>
    <inputs>


        <param type="data" name="mogi_data" label="Data to submit to MOGI" format="sqlite"
               help="SQLite database to submit to MOGI" />


        <param type="text" name="mogi_url" label="Data to submit to MOGI" 
               help="MOGI URL" />
  

	

	
    </inputs>
    <outputs>
        <data name="curl_out" format="json" label="${tool.name} on ${on_string}: submit to MOGI (json if successful)"
              from_work_dir="curl_out.txt" />

    </outputs>
    <tests>
        <test>
	    <param name="camera_xcms" value="xcms"/>
            <param name="mogi_data" value="alldata.sqlite"/>
            <param name="mogi_url" value="https://www.djangoproject.com/"/>
           
            <output name="curl_out" value="curl_out.txt" />
            
              
        </test>
    </tests>
    
    <help><![CDATA[
=============================================================
Submit SQLite Database to MOGI
=============================================================


-----------
Output
-----------
* out.json: The JSON request sent to MOGI

  ]]></help>
<expand macro="citations" />
</tool>
